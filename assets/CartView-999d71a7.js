import{m as _,a as b}from"./pinia-7d28dea6.js";import{c as h}from"./cart-91a72be6.js";import{s as y}from"./statusStore-fedbabd5.js";import{L as w}from"./vue-loading-overlay-67898897.js";import{aM as f,aC as a,W as i,a3 as r,X as t,F as c,bj as u,U as C,a2 as d,aK as v,aZ as l,a1 as I,bo as V,bl as k,bb as x}from"./@vue-a2e6aab2.js";import{_ as L}from"./index-90e19ebd.js";import"./vue-demi-71ba0ef2.js";import"./axios-08622986.js";import"./sweetalert2-fc38d252.js";import"./@ckeditor-b092e1d3.js";import"./vue-71628d3f.js";import"./vue-router-49be82a2.js";import"./vue-axios-58a7c26f.js";import"./bootstrap-8396874d.js";import"./@popperjs-9847b28c.js";import"./vee-validate-aa725db8.js";import"./@vee-validate-55db0f47.js";const{VITE_APP_URL:P,VITE_APP_PATH:$}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"leo533",BASE_URL:"/test-github/",MODE:"production",DEV:!1,PROD:!0},A={data(){return{products:[],productId:"",cart:{},form:{email:"",name:"",phone:"",address:"",msg:""},total:0}},components:{Loading:w},computed:{..._(h,["carts","final_total","isLoading","loadingItem"]),..._(y,["isLoading"])},methods:{...b(h,["getCarts","deleteItem","updateCartItem","clearCart"]),changeLoading(e){this.loadingItem=e},sendOrder(){if(this.cart.carts.length===0)alert("購物車清單內為空");else{const e={user:{name:this.form.name,email:this.form.email,tel:this.form.phone,address:this.form.address},message:this.form.msg};this.$http.post(`${P}v2/api/${$}/order`,{data:e}).then(o=>{this.getCarts(),this.loadingItem="",this.$refs.form.resetForm(),alert("訂單已送出")}).catch(o=>{alert(o.response.data.message)})}},validateTelephone(e){return/^(09)[0-9]{8}$/.test(e)?!0:"需要正確的手機號碼"}},mounted(){this.getCarts()}},j={class:"container py-8"},E=t("h2",{class:"text-center text-primary mb-7 fw-bold"},"購物車列表",-1),T={class:"row g-0 g-md-3 g-lg-4 justify-content-center flex-column flex-md-row mb-4"},U=I('<div class="pt-4 pb-3"><div class="container"><div class="row justify-content-center"><div class="col-9 col-md-7 timeline"></div></div><div class="row"><div class="col-3 col-md-5"><div class="timeline-pointer text-center step-1 active"><p>購物清單確認</p></div></div><div class="col-6 col-md-2"><div class="timeline-pointer text-center step-2"><p>填寫訂單</p></div></div><div class="col-3 col-md-5"><div class="timeline-pointer text-center step-3"><p>購物完成</p></div></div></div></div></div>',1),N={class:"col-md-6"},S=t("span",{class:"material-icons"},"keyboard_return",-1),D={class:"row g-0 g-md-3 g-lg-4 bg-white p-2"},B={class:"col-12 mb-3"},M={class:"text-end"},R=["disabled"],F={key:0,class:"fas fa-spinner fa-pulse"},K={class:"col-12 noto-serif-font"},O={class:"col-4 d-flex align-items-center"},q=["src"],H={class:"col-8 d-flex flex-column justify-content-center"},W={class:"row g-4 mb-4"},X={class:"col-12 mb-0 position-relative fs-5 fw-bold"},Z={class:"col position-absolute top-0 end-0"},z=["onClick","disabled"],G=t("span",{class:"material-icons fs-2"},"delete",-1),J=[G],Q={class:"row g-4 d-flex justify-content-between"},Y={class:"col-4 d-block fs-3 text-danger fw-bold"},tt=["onUpdate:modelValue","onChange","disabled"],et=["value","Key"],st={class:"col-12 mb-6"},ot={class:"d-flex justify-content-end align-items-center shadow-sm"},at=t("span",{class:"fs-4 me-6"},"總金額",-1),it={class:"fs-5 text-end me-2 text-danger fw-bold noto-serif-font"},nt={class:"col-12 d-flex justify-content-end"},dt={key:1,class:"text-center"};function lt(e,o,rt,ct,mt,pt){var p;const g=f("loading"),m=f("router-link");return a(),i("div",j,[r(g,{active:e.isLoading,"onUpdate:active":o[0]||(o[0]=s=>e.isLoading=s)},null,8,["active"]),E,t("div",T,[(p=e.carts.carts)!=null&&p.length?(a(),i(c,{key:0},[U,t("div",N,[r(m,{to:"/products",class:"d-flex align-items-center text-decoration-none"},{default:u(()=>[S,d(" 回商品列表 ")]),_:1}),t("div",D,[t("div",B,[t("div",M,[t("button",{class:"btn btn-outline-danger",type:"button",onClick:o[1]||(o[1]=(...s)=>e.clearCart&&e.clearCart(...s)),disabled:e.loadingItem==="deleteAll"},[e.loadingItem==="deleteAll"?(a(),i("i",F)):C("",!0),d(" 清空購物車 ")],8,R)])]),t("div",K,[(a(!0),i(c,null,v(e.carts.carts,s=>(a(),i("div",{class:"row g-4 d-flex shadow-sm mb-3",key:s.id},[t("div",O,[t("img",{class:"object-fit w-100 img-fluid",src:s.product.imageUrl,alt:""},null,8,q)]),t("div",H,[t("div",W,[t("div",X,[d(l(s.product.title)+" ",1),t("div",Z,[t("a",{href:"#",onClick:V(()=>e.deleteItem(s),["prevent"]),disabled:s.id===e.loadingItem},J,8,z)])])]),t("div",Q,[t("span",Y,l(e.$filters.currency(s.product.price)),1),k(t("select",{name:"product-number",id:"",class:"form-select w-50","onUpdate:modelValue":n=>s.qty=n,onChange:()=>e.updateCartItem(s),disabled:s.id===e.loadingItem},[(a(),i(c,null,v(10,n=>t("option",{value:n,Key:n+"45678"},l(n),9,et)),64))],40,tt),[[x,s.qty]])])])]))),128))]),t("div",st,[t("div",ot,[at,t("span",it,l(e.$filters.currency(e.carts.total)),1)])]),t("div",nt,[r(m,{to:"/order",class:"btn btn-primary"},{default:u(()=>[d("確認訂單")]),_:1})])])])],64)):(a(),i("p",dt,"目前購物車為空的狀態喔!，再去選購吧~"))])])}const At=L(A,[["render",lt]]);export{At as default};
